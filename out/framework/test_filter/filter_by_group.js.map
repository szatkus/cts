{"version":3,"sources":["../../../src/framework/test_filter/filter_by_group.ts"],"names":["FilterByGroup","constructor","suite","groupPrefix","iterate","loader","specs","listing","entries","path","description","startsWith","isReadme","endsWith","spec","import","push","id"],"mappings":";;;;;;AAKA,OAAO,MAAMA,aAAN,CAA0C;AAI/CC,EAAAA,WAAW,CAACC,KAAD,EAAgBC,WAAhB,EAAqC;AAAA;;AAAA;;AAC9C,SAAKD,KAAL,GAAaA,KAAb;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACD;;AAED,QAAMC,OAAN,CAAcC,MAAd,EAAmE;AACjE,UAAMC,KAAK,GAAG,MAAMD,MAAM,CAACE,OAAP,CAAe,KAAKL,KAApB,CAApB;AACA,UAAMM,OAA2B,GAAG,EAApC;AAEA,UAAMN,KAAK,GAAG,KAAKA,KAAnB;;AACA,SAAK,MAAM;AAAEO,MAAAA,IAAF;AAAQC,MAAAA;AAAR,KAAX,IAAoCJ,KAApC,EAA2C;AACzC,UAAIG,IAAI,CAACE,UAAL,CAAgB,KAAKR,WAArB,CAAJ,EAAuC;AACrC,cAAMS,QAAQ,GAAGH,IAAI,KAAK,EAAT,IAAeA,IAAI,CAACI,QAAL,CAAc,GAAd,CAAhC;AACA,cAAMC,IAAI,GAAGF,QAAQ,GAChB;AAAEF,UAAAA;AAAF,SADgB,GAEf,MAAML,MAAM,CAACU,MAAP,CAAe,GAAEb,KAAM,IAAGO,IAAK,UAA/B,CAFZ;AAGAD,QAAAA,OAAO,CAACQ,IAAR,CAAa;AAAEC,UAAAA,EAAE,EAAE;AAAEf,YAAAA,KAAF;AAASO,YAAAA;AAAT,WAAN;AAAuBK,UAAAA;AAAvB,SAAb;AACD;AACF;;AAED,WAAON,OAAP;AACD;;AAzB8C","sourcesContent":["import { ReadmeFile, TestFileLoader, TestSpec } from '../loader.js';\n\nimport { TestFilterResult } from './index.js';\nimport { TestFilter } from './internal.js';\n\nexport class FilterByGroup implements TestFilter {\n  private readonly suite: string;\n  private readonly groupPrefix: string;\n\n  constructor(suite: string, groupPrefix: string) {\n    this.suite = suite;\n    this.groupPrefix = groupPrefix;\n  }\n\n  async iterate(loader: TestFileLoader): Promise<TestFilterResult[]> {\n    const specs = await loader.listing(this.suite);\n    const entries: TestFilterResult[] = [];\n\n    const suite = this.suite;\n    for (const { path, description } of specs) {\n      if (path.startsWith(this.groupPrefix)) {\n        const isReadme = path === '' || path.endsWith('/');\n        const spec = isReadme\n          ? ({ description } as ReadmeFile)\n          : ((await loader.import(`${suite}/${path}.spec.js`)) as TestSpec);\n        entries.push({ id: { suite, path }, spec });\n      }\n    }\n\n    return entries;\n  }\n}\n"],"file":"filter_by_group.js"}