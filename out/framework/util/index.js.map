{"version":3,"sources":["../../../src/framework/util/index.ts"],"names":["timeout","perf","performance","require","now","rejectOnTimeout","ms","msg","Promise","resolve","reject","Error","objectEquals","x","y","constructor","Function","RegExp","valueOf","Array","isArray","length","Date","Object","x1","y1","p","keys","every","i","indexOf","range","n","fn","map","_"],"mappings":";;;;AAAA,SAASA,OAAT,QAAwB,cAAxB;AAEA,cAAc,YAAd,C,CAEA;;AAEA,MAAMC,IAAI,GAAG,OAAOC,WAAP,KAAuB,WAAvB,GAAqCA,WAArC,GAAmDC,OAAO,CAAC,YAAD,CAAP,CAAsBD,WAAtF;AAEA,OAAO,SAASE,GAAT,GAAuB;AAC5B,SAAOH,IAAI,CAACG,GAAL,EAAP;AACD;AAED,OAAO,SAASC,eAAT,CAAyBC,EAAzB,EAAqCC,GAArC,EAAkE;AACvE,SAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtCV,IAAAA,OAAO,CAAC,MAAM;AACZU,MAAAA,MAAM,CAAC,IAAIC,KAAJ,CAAUJ,GAAV,CAAD,CAAN;AACD,KAFM,EAEJD,EAFI,CAAP;AAGD,GAJM,CAAP;AAKD;AAED,OAAO,SAASM,YAAT,CAAsBC,CAAtB,EAAkCC,CAAlC,EAAuD;AAC5D,MAAI,OAAOD,CAAP,KAAa,QAAb,IAAyB,OAAOC,CAAP,KAAa,QAA1C,EAAoD,OAAOD,CAAC,KAAKC,CAAb;AACpD,MAAID,CAAC,KAAK,IAAN,IAAcC,CAAC,KAAK,IAAxB,EAA8B,OAAOD,CAAC,KAAKC,CAAb;AAC9B,MAAID,CAAC,CAACE,WAAF,KAAkBD,CAAC,CAACC,WAAxB,EAAqC,OAAO,KAAP;AACrC,MAAIF,CAAC,YAAYG,QAAjB,EAA2B,OAAOH,CAAC,KAAKC,CAAb;AAC3B,MAAID,CAAC,YAAYI,MAAjB,EAAyB,OAAOJ,CAAC,KAAKC,CAAb;AACzB,MAAID,CAAC,KAAKC,CAAN,IAAWD,CAAC,CAACK,OAAF,OAAgBJ,CAAC,CAACI,OAAF,EAA/B,EAA4C,OAAO,IAAP;AAC5C,MAAIC,KAAK,CAACC,OAAN,CAAcP,CAAd,KAAoBM,KAAK,CAACC,OAAN,CAAcN,CAAd,CAApB,IAAwCD,CAAC,CAACQ,MAAF,KAAaP,CAAC,CAACO,MAA3D,EAAmE,OAAO,KAAP;AACnE,MAAIR,CAAC,YAAYS,IAAjB,EAAuB,OAAO,KAAP;AACvB,MAAI,EAAET,CAAC,YAAYU,MAAf,CAAJ,EAA4B,OAAO,KAAP;AAC5B,MAAI,EAAET,CAAC,YAAYS,MAAf,CAAJ,EAA4B,OAAO,KAAP;AAE5B,QAAMC,EAAE,GAAGX,CAAX;AACA,QAAMY,EAAE,GAAGX,CAAX;AACA,QAAMY,CAAC,GAAGH,MAAM,CAACI,IAAP,CAAYd,CAAZ,CAAV;AACA,SAAOU,MAAM,CAACI,IAAP,CAAYb,CAAZ,EAAec,KAAf,CAAqBC,CAAC,IAAIH,CAAC,CAACI,OAAF,CAAUD,CAAV,MAAiB,CAAC,CAA5C,KAAkDH,CAAC,CAACE,KAAF,CAAQC,CAAC,IAAIjB,YAAY,CAACY,EAAE,CAACK,CAAD,CAAH,EAAQJ,EAAE,CAACI,CAAD,CAAV,CAAzB,CAAzD;AACD;AAED,OAAO,SAASE,KAAT,CAAkBC,CAAlB,EAA6BC,EAA7B,EAAwD;AAC7D,SAAO,CAAC,GAAG,IAAId,KAAJ,CAAUa,CAAV,CAAJ,EAAkBE,GAAlB,CAAsB,CAACC,CAAD,EAAIN,CAAJ,KAAUI,EAAE,CAACJ,CAAD,CAAlC,CAAP;AACD","sourcesContent":["import { timeout } from './timeout.js';\n\nexport * from './stack.js';\n\n// performance.now() is available in all browsers, but not in scope by default in Node.\n// tslint:disable-next-line no-var-requires\nconst perf = typeof performance !== 'undefined' ? performance : require('perf_hooks').performance;\n\nexport function now(): number {\n  return perf.now();\n}\n\nexport function rejectOnTimeout(ms: number, msg: string): Promise<never> {\n  return new Promise((resolve, reject) => {\n    timeout(() => {\n      reject(new Error(msg));\n    }, ms);\n  });\n}\n\nexport function objectEquals(x: unknown, y: unknown): boolean {\n  if (typeof x !== 'object' || typeof y !== 'object') return x === y;\n  if (x === null || y === null) return x === y;\n  if (x.constructor !== y.constructor) return false;\n  if (x instanceof Function) return x === y;\n  if (x instanceof RegExp) return x === y;\n  if (x === y || x.valueOf() === y.valueOf()) return true;\n  if (Array.isArray(x) && Array.isArray(y) && x.length !== y.length) return false;\n  if (x instanceof Date) return false;\n  if (!(x instanceof Object)) return false;\n  if (!(y instanceof Object)) return false;\n\n  const x1 = x as { [k: string]: unknown };\n  const y1 = y as { [k: string]: unknown };\n  const p = Object.keys(x);\n  return Object.keys(y).every(i => p.indexOf(i) !== -1) && p.every(i => objectEquals(x1[i], y1[i]));\n}\n\nexport function range<T>(n: number, fn: (i: number) => T): T[] {\n  return [...new Array(n)].map((_, i) => fn(i));\n}\n"],"file":"index.js"}