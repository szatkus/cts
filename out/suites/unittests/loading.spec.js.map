{"version":3,"sources":["../../../src/suites/unittests/loading.spec.ts"],"names":["description","TestGroup","paramsEquals","TestLoader","Logger","makeQueryString","objectEquals","UnitTest","listingData","suite1","path","suite2","specsData","g","test","params","a","b","_c","t","debug","fail","FakeTestFileLoader","listing","suite","import","hasOwnProperty","Error","LoadingTest","load","filters","Array","from","loader","loadTestsFromCmdLine","singleGroup","query","rec","record","length","spec","iterate","shouldReject","expect","foo","id","s","l","Function","log","res","rcs","results","cases","res0","run","status","timems","logs","undefined","JSON","stringify","res1","res2","toJSON","startsWith","indexOf"],"mappings":";;;;;;AAAA,OAAO,MAAMA,WAAW,GAAI;;CAArB;AAIP,SAAkBC,SAAlB,EAA6BC,YAA7B,QAAiD,0BAAjD;AAEA,SAAyBC,UAAzB,QAA6D,2BAA7D;AACA,SAASC,MAAT,QAAuB,2BAAvB;AAEA,SAASC,eAAT,QAAgC,8BAAhC;AACA,SAASC,YAAT,QAA6B,+BAA7B;AAEA,SAASC,QAAT,QAAyB,gBAAzB;AAEA,MAAMC,WAAqD,GAAG;AAC5DC,EAAAA,MAAM,EAAE,CACN;AAAEC,IAAAA,IAAI,EAAE,EAAR;AAAYV,IAAAA,WAAW,EAAE;AAAzB,GADM,EAEN;AAAEU,IAAAA,IAAI,EAAE,KAAR;AAAeV,IAAAA,WAAW,EAAE;AAA5B,GAFM,EAGN;AAAEU,IAAAA,IAAI,EAAE,MAAR;AAAgBV,IAAAA,WAAW,EAAE;AAA7B,GAHM,EAIN;AAAEU,IAAAA,IAAI,EAAE,UAAR;AAAoBV,IAAAA,WAAW,EAAE;AAAjC,GAJM,EAKN;AAAEU,IAAAA,IAAI,EAAE,KAAR;AAAeV,IAAAA,WAAW,EAAE;AAA5B,GALM,CADoD;AAQ5DW,EAAAA,MAAM,EAAE,CAAC;AAAED,IAAAA,IAAI,EAAE,EAAR;AAAYV,IAAAA,WAAW,EAAE;AAAzB,GAAD,EAAuC;AAAEU,IAAAA,IAAI,EAAE,MAAR;AAAgBV,IAAAA,WAAW,EAAE;AAA7B,GAAvC;AARoD,CAA9D;AAWA,MAAMY,SAA4C,GAAG;AACnD,uBAAqB;AAAEZ,IAAAA,WAAW,EAAE;AAAf,GAD8B;AAEnD,wBAAsB;AACpBA,IAAAA,WAAW,EAAE,SADO;AAEpBa,IAAAA,CAAC,EAAE,CAAC,MAAM;AACR,YAAMA,CAAC,GAAG,IAAIZ,SAAJ,CAAcM,QAAd,CAAV;AACAM,MAAAA,CAAC,CAACC,IAAF,CAAO,OAAP,EAAgB,MAAM,CAAE,CAAxB;AACAD,MAAAA,CAAC,CAACC,IAAF,CAAO,SAAP,EAAkB,MAAM,CAAE,CAA1B;AACAD,MAAAA,CAAC,CAACC,IAAF,CAAO,MAAP,EAAe,MAAM,CAAE,CAAvB;AACA,aAAOD,CAAP;AACD,KANE;AAFiB,GAF6B;AAYnD,2BAAyB;AAAEb,IAAAA,WAAW,EAAE;AAAf,GAZ0B;AAanD,6BAA2B;AACzBA,IAAAA,WAAW,EAAE,SADY;AAEzBa,IAAAA,CAAC,EAAE,CAAC,MAAM;AACR,YAAMA,CAAC,GAAG,IAAIZ,SAAJ,CAAcM,QAAd,CAAV;AACAM,MAAAA,CAAC,CAACC,IAAF,CAAO,KAAP,EAAc,MAAM,CAAE,CAAtB;AACA,aAAOD,CAAP;AACD,KAJE;AAFsB,GAbwB;AAqBnD,wBAAsB;AACpBb,IAAAA,WAAW,EAAE,SADO;AAEpBa,IAAAA,CAAC,EAAE,CAAC,MAAM;AACR,YAAMA,CAAC,GAAG,IAAIZ,SAAJ,CAAcM,QAAd,CAAV;AACAM,MAAAA,CAAC,CAACC,IAAF,CAAO,KAAP,EAAc,MAAM,CAAE,CAAtB,EAAwBC,MAAxB,CAA+B,CAC7B;AAAEC,QAAAA,CAAC,EAAE,CAAL;AAAQC,QAAAA,CAAC,EAAE,CAAX;AAAcC,QAAAA,EAAE,EAAE;AAAlB,OAD6B,EACN;AACvB;AAAEF,QAAAA,CAAC,EAAE,CAAL;AAAQC,QAAAA,CAAC,EAAE,CAAX;AAAcC,QAAAA,EAAE,EAAE;AAAlB,OAF6B,CAA/B;AAIA,aAAOL,CAAP;AACD,KAPE;AAFiB,GArB6B;AAgCnD,yBAAuB;AACrBb,IAAAA,WAAW,EAAE,SADQ;AAErBa,IAAAA,CAAC,EAAE,CAAC,MAAM;AACR,YAAMA,CAAC,GAAG,IAAIZ,SAAJ,CAAcM,QAAd,CAAV;AACAM,MAAAA,CAAC,CAACC,IAAF,CAAO,MAAP,EAAeK,CAAC,IAAI;AAClBA,QAAAA,CAAC,CAACC,KAAF,CAAQ,IAAR;AACD,OAFD;AAGAP,MAAAA,CAAC,CAACC,IAAF,CAAO,MAAP,EAAeK,CAAC,IAAI;AAClBA,QAAAA,CAAC,CAACC,KAAF,CAAQ,IAAR;AACAD,QAAAA,CAAC,CAACC,KAAF,CAAQ,IAAR;AACD,OAHD,EAGGL,MAHH,CAGU,CAAC,EAAD,CAHV;AAIAF,MAAAA,CAAC,CAACC,IAAF,CAAO,MAAP,EAAeK,CAAC,IAAI;AAClBA,QAAAA,CAAC,CAACE,IAAF,CAAO,KAAP;AACD,OAFD;AAGA,aAAOR,CAAP;AACD,KAbE;AAFkB;AAhC4B,CAArD;;AAmDA,MAAMS,kBAAN,CAAmD;AACjD,QAAMC,OAAN,CAAcC,KAAd,EAAwD;AACtD,WAAOhB,WAAW,CAACgB,KAAD,CAAlB;AACD;;AAED,QAAMC,MAAN,CAAaf,IAAb,EAAsD;AACpD,QAAI,CAACE,SAAS,CAACc,cAAV,CAAyBhB,IAAzB,CAAL,EAAqC;AACnC,YAAM,IAAIiB,KAAJ,CAAU,sBAAsBjB,IAAtB,GAA6B,iBAAvC,CAAN;AACD;;AACD,WAAOE,SAAS,CAACF,IAAD,CAAhB;AACD;;AAVgD;;AAanD,MAAMkB,WAAN,SAA0BrB,QAA1B,CAAmC;AAGjC,QAAMsB,IAAN,CAAWC,OAAX,EAA2D;AACzD,WAAOC,KAAK,CAACC,IAAN,EAAW,MAAMJ,WAAW,CAACK,MAAZ,CAAmBC,oBAAnB,CAAwCJ,OAAxC,CAAjB,EAAP;AACD;;AAED,QAAMK,WAAN,CAAkBC,KAAlB,EAAqD;AACnD,UAAM,CAACC,GAAD,IAAQ,IAAIjC,MAAJ,GAAakC,MAAb,CAAoB;AAAEd,MAAAA,KAAK,EAAE,EAAT;AAAad,MAAAA,IAAI,EAAE;AAAnB,KAApB,CAAd;AACA,UAAMM,CAAC,GAAG,MAAM,KAAKa,IAAL,CAAU,CAACO,KAAD,CAAV,CAAhB;;AACA,QAAIpB,CAAC,CAACuB,MAAF,KAAa,CAAjB,EAAoB;AAClB,YAAM,IAAIZ,KAAJ,CAAU,qBAAV,CAAN;AACD;;AACD,UAAMa,IAAI,GAAGxB,CAAC,CAAC,CAAD,CAAD,CAAKwB,IAAlB;;AACA,QAAI,EAAE,OAAOA,IAAT,CAAJ,EAAoB;AAClB,YAAM,IAAIb,KAAJ,CAAU,iBAAV,CAAN;AACD;;AACD,WAAOI,KAAK,CAACC,IAAN,CAAWQ,IAAI,CAAC3B,CAAL,CAAO4B,OAAP,CAAeJ,GAAf,CAAX,CAAP;AACD;;AAlBgC;;gBAA7BT,W,YACiC,IAAIzB,UAAJ,CAAe,IAAImB,kBAAJ,EAAf,C;;AAoBvC,OAAO,MAAMT,CAAC,GAAG,IAAIZ,SAAJ,CAAc2B,WAAd,CAAV;AAEPf,CAAC,CAACC,IAAF,CAAO,aAAP,EAAsB,MAAMK,CAAN,IAAW;AAC/BA,EAAAA,CAAC,CAACuB,YAAF,CAAe,OAAf,EAAwBvB,CAAC,CAACU,IAAF,CAAO,CAAC,QAAD,CAAP,CAAxB;AACAV,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACU,IAAF,CAAO,CAAC,SAAD,CAAP,CAAP,EAA4BU,MAA5B,KAAuC,CAAhD;AACD,CAHD;AAKA1B,CAAC,CAACC,IAAF,CAAO,eAAP,EAAwB,MAAMK,CAAN,IAAW;AACjCA,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACU,IAAF,CAAO,CAAC,UAAD,CAAP,CAAP,EAA6BU,MAA7B,KAAwC,CAAjD;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACU,IAAF,CAAO,CAAC,WAAD,CAAP,CAAP,EAA8BU,MAA9B,KAAyC,CAAlD;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACU,IAAF,CAAO,CAAC,YAAD,CAAP,CAAP,EAA+BU,MAA/B,KAA0C,CAAnD;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACU,IAAF,CAAO,CAAC,aAAD,CAAP,CAAP,EAAgCU,MAAhC,KAA2C,CAApD;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACU,IAAF,CAAO,CAAC,WAAD,CAAP,CAAP,EAA8BU,MAA9B,KAAyC,CAAlD;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACU,IAAF,CAAO,CAAC,YAAD,CAAP,CAAP,EAA+BU,MAA/B,KAA0C,CAAnD;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACU,IAAF,CAAO,CAAC,aAAD,CAAP,CAAP,EAAgCU,MAAhC,KAA2C,CAApD;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACU,IAAF,CAAO,CAAC,cAAD,CAAP,CAAP,EAAiCU,MAAjC,KAA4C,CAArD;AACD,CATD;AAWA1B,CAAC,CAACC,IAAF,CAAO,aAAP,EAAsB,MAAMK,CAAN,IAAW;AAC/BA,EAAAA,CAAC,CAACuB,YAAF,CAAe,OAAf,EAAwBvB,CAAC,CAACU,IAAF,CAAO,CAAC,UAAD,CAAP,CAAxB;AACAV,EAAAA,CAAC,CAACuB,YAAF,CAAe,OAAf,EAAwBvB,CAAC,CAACU,IAAF,CAAO,CAAC,aAAD,CAAP,CAAxB;AACAV,EAAAA,CAAC,CAACuB,YAAF,CAAe,OAAf,EAAwBvB,CAAC,CAACU,IAAF,CAAO,CAAC,cAAD,CAAP,CAAxB;AACAV,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,kBAAd,CAAP,EAA0CI,MAA1C,KAAqD,CAA9D;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,aAAd,CAAP,EAAqCI,MAArC,KAAgD,CAAzD;AAEA;AACE,UAAMK,GAAG,GAAG,CAAC,MAAMzB,CAAC,CAACU,IAAF,CAAO,CAAC,aAAD,CAAP,CAAP,EAAgC,CAAhC,CAAZ;AACAV,IAAAA,CAAC,CAACwB,MAAF,CAASC,GAAG,CAACC,EAAJ,CAAOrB,KAAP,KAAiB,QAA1B;AACAL,IAAAA,CAAC,CAACwB,MAAF,CAASC,GAAG,CAACC,EAAJ,CAAOnC,IAAP,KAAgB,KAAzB;;AACA,QAAI,EAAE,OAAOkC,GAAG,CAACJ,IAAb,CAAJ,EAAwB;AACtB,YAAM,IAAIb,KAAJ,CAAU,WAAV,CAAN;AACD;;AACD,UAAM,CAACU,GAAD,IAAQ,IAAIjC,MAAJ,GAAakC,MAAb,CAAoB;AAAEd,MAAAA,KAAK,EAAE,EAAT;AAAad,MAAAA,IAAI,EAAE;AAAnB,KAApB,CAAd;AACAS,IAAAA,CAAC,CAACwB,MAAF,CAASZ,KAAK,CAACC,IAAN,CAAWY,GAAG,CAACJ,IAAJ,CAAS3B,CAAT,CAAW4B,OAAX,CAAmBJ,GAAnB,CAAX,EAAoCE,MAApC,KAA+C,CAAxD;AACD;AACF,CAjBD;AAmBA1B,CAAC,CAACC,IAAF,CAAO,eAAP,EAAwB,MAAMK,CAAN,IAAW;AACjCA,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,cAAd,CAAP,EAAsCI,MAAtC,KAAiD,CAA1D;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,eAAd,CAAP,EAAuCI,MAAvC,KAAkD,CAA3D;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,kBAAd,CAAP,EAA0CI,MAA1C,KAAqD,CAA9D;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,gBAAd,CAAP,EAAwCI,MAAxC,KAAmD,CAA5D;AACD,CALD;AAOA1B,CAAC,CAACC,IAAF,CAAO,oBAAP,EAA6B,MAAMK,CAAN,IAAW;AACtCA,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,mBAAd,CAAP,EAA2CI,MAA3C,KAAsD,CAA/D;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,iBAAd,CAAP,EAAyCI,MAAzC,KAAoD,CAA7D;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,iBAAd,CAAP,EAAyCI,MAAzC,KAAoD,CAA7D;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,mBAAd,CAAP,EAA2CI,MAA3C,KAAsD,CAA/D;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,8BAAd,CAAP,EAAsDI,MAAtD,KAAiE,CAA1E;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,8BAAd,CAAP,EAAsDI,MAAtD,KAAiE,CAA1E;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,qCAAd,CAAP,EAA6DI,MAA7D,KAAwE,CAAjF;AACD,CARD;AAUA1B,CAAC,CAACC,IAAF,CAAO,8BAAP,EAAuC,MAAMK,CAAN,IAAW;AAChD,QAAM2B,CAAC,GAAGzC,eAAe,CACvB;AAAEmB,IAAAA,KAAK,EAAE,QAAT;AAAmBd,IAAAA,IAAI,EAAE;AAAzB,GADuB,EAEvB;AAAEI,IAAAA,IAAI,EAAE,KAAR;AAAeC,IAAAA,MAAM,EAAE;AAAEC,MAAAA,CAAC,EAAE,CAAL;AAAQC,MAAAA,CAAC,EAAE;AAAX;AAAvB,GAFuB,CAAzB;AAIAE,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAcW,CAAd,CAAP,EAAyBP,MAAzB,KAAoC,CAA7C;AACD,CAND;AAQA1B,CAAC,CAACC,IAAF,CAAO,oBAAP,EAA6B,MAAMK,CAAN,IAAW;AACtCA,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,iBAAd,CAAP,EAAyCI,MAAzC,KAAoD,CAA7D;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,mBAAd,CAAP,EAA2CI,MAA3C,KAAsD,CAA/D;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,wBAAd,CAAP,EAAgDI,MAAhD,KAA2D,CAApE;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,8BAAd,CAAP,EAAsDI,MAAtD,KAAiE,CAA1E;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,8BAAd,CAAP,EAAsDI,MAAtD,KAAiE,CAA1E;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,wBAAd,CAAP,EAAgDI,MAAhD,KAA2D,CAApE;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,wBAAd,CAAP,EAAgDI,MAAhD,KAA2D,CAApE;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,wBAAd,CAAP,EAAgDI,MAAhD,KAA2D,CAApE;AACApB,EAAAA,CAAC,CAACwB,MAAF,CAAS,CAAC,MAAMxB,CAAC,CAACgB,WAAF,CAAc,yBAAd,CAAP,EAAiDI,MAAjD,KAA4D,CAArE;AACD,CAVD;AAYA1B,CAAC,CAACC,IAAF,CAAO,SAAP,EAAkB,MAAMK,CAAN,IAAW;AAC3B,QAAM4B,CAAC,GAAG,MAAM5B,CAAC,CAACU,IAAF,CAAO,CAAC,aAAD,CAAP,CAAhB;;AACA,MAAIkB,CAAC,CAACR,MAAF,KAAa,CAAjB,EAAoB;AAClB,UAAM,IAAIZ,KAAJ,CAAU,gBAAV,CAAN;AACD;;AAEDR,EAAAA,CAAC,CAACwB,MAAF,CAASI,CAAC,CAAC,CAAD,CAAD,CAAKF,EAAL,CAAQrB,KAAR,KAAkB,QAA3B;AACAL,EAAAA,CAAC,CAACwB,MAAF,CAASI,CAAC,CAAC,CAAD,CAAD,CAAKF,EAAL,CAAQnC,IAAR,KAAiB,MAA1B;AACAS,EAAAA,CAAC,CAACwB,MAAF,CAASI,CAAC,CAAC,CAAD,CAAD,CAAKP,IAAL,CAAUxC,WAAV,KAA0B,SAAnC;;AACA,MAAI,EAAE,OAAO+C,CAAC,CAAC,CAAD,CAAD,CAAKP,IAAd,CAAJ,EAAyB;AACvB,UAAM,IAAIb,KAAJ,EAAN;AACD;;AACDR,EAAAA,CAAC,CAACwB,MAAF,CAASI,CAAC,CAAC,CAAD,CAAD,CAAKP,IAAL,CAAU3B,CAAV,CAAY4B,OAAZ,YAA+BO,QAAxC;AAEA,QAAMC,GAAG,GAAG,IAAI7C,MAAJ,EAAZ;AACA,QAAM,CAACiC,GAAD,EAAMa,GAAN,IAAaD,GAAG,CAACX,MAAJ,CAAWS,CAAC,CAAC,CAAD,CAAD,CAAKF,EAAhB,CAAnB;AACA,QAAMM,GAAG,GAAGpB,KAAK,CAACC,IAAN,CAAWe,CAAC,CAAC,CAAD,CAAD,CAAKP,IAAL,CAAU3B,CAAV,CAAY4B,OAAZ,CAAoBJ,GAApB,CAAX,CAAZ;;AACA,MAAIc,GAAG,CAACZ,MAAJ,KAAe,CAAnB,EAAsB;AACpB,UAAM,IAAIZ,KAAJ,CAAU,gBAAV,CAAN;AACD;;AAEDR,EAAAA,CAAC,CAACwB,MAAF,CAASQ,GAAG,CAAC,CAAD,CAAH,CAAON,EAAP,CAAU/B,IAAV,KAAmB,MAA5B;AACAK,EAAAA,CAAC,CAACwB,MAAF,CAASQ,GAAG,CAAC,CAAD,CAAH,CAAON,EAAP,CAAU9B,MAAV,KAAqB,IAA9B;AAEAI,EAAAA,CAAC,CAACwB,MAAF,CAASQ,GAAG,CAAC,CAAD,CAAH,CAAON,EAAP,CAAU/B,IAAV,KAAmB,MAA5B;AACAK,EAAAA,CAAC,CAACwB,MAAF,CAASzC,YAAY,CAACiD,GAAG,CAAC,CAAD,CAAH,CAAON,EAAP,CAAU9B,MAAX,EAAmB,EAAnB,CAArB;AAEAI,EAAAA,CAAC,CAACwB,MAAF,CAASM,GAAG,CAACG,OAAJ,CAAY,CAAZ,MAAmBF,GAA5B;AACA/B,EAAAA,CAAC,CAACwB,MAAF,CAASO,GAAG,CAACV,IAAJ,KAAa,cAAtB;AACArB,EAAAA,CAAC,CAACwB,MAAF,CAASO,GAAG,CAACG,KAAJ,CAAUd,MAAV,KAAqB,CAA9B;AAEA;AACE,UAAMc,KAAK,GAAGH,GAAG,CAACG,KAAlB;AACA,UAAMC,IAAI,GAAG,MAAMH,GAAG,CAAC,CAAD,CAAH,CAAOI,GAAP,CAAW,IAAX,CAAnB;;AACA,QAAIF,KAAK,CAACd,MAAN,KAAiB,CAArB,EAAwB;AACtB,YAAM,IAAIZ,KAAJ,CAAU,sBAAV,CAAN;AACD;;AACDR,IAAAA,CAAC,CAACwB,MAAF,CAASO,GAAG,CAACG,KAAJ,CAAU,CAAV,MAAiBC,IAA1B;AACAnC,IAAAA,CAAC,CAACwB,MAAF,CAASW,IAAI,CAACxC,IAAL,KAAc,MAAvB;AACAK,IAAAA,CAAC,CAACwB,MAAF,CAASW,IAAI,CAACvC,MAAL,KAAgB,IAAzB;AACAI,IAAAA,CAAC,CAACwB,MAAF,CAASW,IAAI,CAACE,MAAL,KAAgB,MAAzB;AACArC,IAAAA,CAAC,CAACwB,MAAF,CAASW,IAAI,CAACG,MAAL,IAAe,CAAxB;;AACA,QAAIH,IAAI,CAACI,IAAL,KAAcC,SAAlB,EAA6B;AAC3B,YAAM,IAAIhC,KAAJ,CAAU,mBAAV,CAAN;AACD;;AACDR,IAAAA,CAAC,CAACwB,MAAF,CAASrC,YAAY,CAACsD,IAAI,CAACC,SAAL,CAAeP,IAAI,CAACI,IAApB,CAAD,EAA4B,QAA5B,CAArB;AACD;AACD;AACE;AACA;AACA;AACA,UAAML,KAAK,GAAGH,GAAG,CAACG,KAAlB;AACA,UAAMS,IAAI,GAAG,MAAMX,GAAG,CAAC,CAAD,CAAH,CAAOI,GAAP,CAAW,IAAX,CAAnB;;AACA,QAAIF,KAAK,CAACd,MAAN,KAAiB,CAArB,EAAwB;AACtB,YAAM,IAAIZ,KAAJ,CAAU,sBAAV,CAAN;AACD;;AACDR,IAAAA,CAAC,CAACwB,MAAF,CAASO,GAAG,CAACG,KAAJ,CAAU,CAAV,MAAiBS,IAA1B;AACA3C,IAAAA,CAAC,CAACwB,MAAF,CAASmB,IAAI,CAAChD,IAAL,KAAc,MAAvB;AACAK,IAAAA,CAAC,CAACwB,MAAF,CAASzC,YAAY,CAAC4D,IAAI,CAAC/C,MAAN,EAAc,EAAd,CAArB;AACAI,IAAAA,CAAC,CAACwB,MAAF,CAASmB,IAAI,CAACN,MAAL,KAAgB,MAAzB;AACArC,IAAAA,CAAC,CAACwB,MAAF,CAASmB,IAAI,CAACL,MAAL,IAAe,CAAxB;;AACA,QAAIK,IAAI,CAACJ,IAAL,KAAcC,SAAlB,EAA6B;AAC3B,YAAM,IAAIhC,KAAJ,CAAU,mBAAV,CAAN;AACD;;AACDR,IAAAA,CAAC,CAACwB,MAAF,CAASrC,YAAY,CAACsD,IAAI,CAACC,SAAL,CAAeC,IAAI,CAACJ,IAApB,CAAD,EAA4B,aAA5B,CAArB;AACD;AACD;AACE;AACA;AACA;AACA,UAAML,KAAK,GAAGH,GAAG,CAACG,KAAlB;AACA,UAAMU,IAAI,GAAG,MAAMZ,GAAG,CAAC,CAAD,CAAH,CAAOI,GAAP,CAAW,IAAX,CAAnB;;AACA,QAAIF,KAAK,CAACd,MAAN,KAAiB,CAArB,EAAwB;AACtB,YAAM,IAAIZ,KAAJ,CAAU,sBAAV,CAAN;AACD;;AACDR,IAAAA,CAAC,CAACwB,MAAF,CAASO,GAAG,CAACG,KAAJ,CAAU,CAAV,MAAiBU,IAA1B;AACA5C,IAAAA,CAAC,CAACwB,MAAF,CAASoB,IAAI,CAACjD,IAAL,KAAc,MAAvB;AACAK,IAAAA,CAAC,CAACwB,MAAF,CAASoB,IAAI,CAAChD,MAAL,KAAgB,IAAzB;AACAI,IAAAA,CAAC,CAACwB,MAAF,CAASoB,IAAI,CAACP,MAAL,KAAgB,MAAzB;AACArC,IAAAA,CAAC,CAACwB,MAAF,CAASoB,IAAI,CAACN,MAAL,IAAe,CAAxB;;AACA,QAAIM,IAAI,CAACL,IAAL,KAAcC,SAAlB,EAA6B;AAC3B,YAAM,IAAIhC,KAAJ,CAAU,mBAAV,CAAN;AACD;;AACDR,IAAAA,CAAC,CAACwB,MAAF,CAASoB,IAAI,CAACL,IAAL,CAAUnB,MAAV,KAAqB,CAA9B;AACA,UAAMQ,CAAC,GAAGgB,IAAI,CAACL,IAAL,CAAU,CAAV,EAAaM,MAAb,EAAV;AACA7C,IAAAA,CAAC,CAACwB,MAAF,CAASI,CAAC,CAACkB,UAAF,CAAa,aAAb,CAAT;AACA9C,IAAAA,CAAC,CAACwB,MAAF,CAASI,CAAC,CAACmB,OAAF,CAAU,eAAV,MAA+B,CAAC,CAAzC;AACD;AACF,CAxFD","sourcesContent":["export const description = `\nTests for queries/filtering, loading, and running.\n`;\n\nimport { RunCase, TestGroup, paramsEquals } from '../../framework/index.js';\nimport { TestSuiteListing, TestSuiteListingEntry } from '../../framework/listing.js';\nimport { TestFileLoader, TestLoader, TestSpecOrReadme } from '../../framework/loader.js';\nimport { Logger } from '../../framework/logger.js';\nimport { TestFilterResult } from '../../framework/test_filter/index.js';\nimport { makeQueryString } from '../../framework/url_query.js';\nimport { objectEquals } from '../../framework/util/index.js';\n\nimport { UnitTest } from './unit_test.js';\n\nconst listingData: { [k: string]: TestSuiteListingEntry[] } = {\n  suite1: [\n    { path: '', description: 'desc 1a' },\n    { path: 'foo', description: 'desc 1b' },\n    { path: 'bar/', description: 'desc 1c' },\n    { path: 'bar/buzz', description: 'desc 1d' },\n    { path: 'baz', description: 'desc 1e' },\n  ],\n  suite2: [{ path: '', description: 'desc 2a' }, { path: 'foof', description: 'desc 2b' }],\n};\n\nconst specsData: { [k: string]: TestSpecOrReadme } = {\n  'suite1/README.txt': { description: 'desc 1a' },\n  'suite1/foo.spec.js': {\n    description: 'desc 1b',\n    g: (() => {\n      const g = new TestGroup(UnitTest);\n      g.test('hello', () => {});\n      g.test('bonjour', () => {});\n      g.test('hola', () => {});\n      return g;\n    })(),\n  },\n  'suite1/bar/README.txt': { description: 'desc 1c' },\n  'suite1/bar/buzz.spec.js': {\n    description: 'desc 1d',\n    g: (() => {\n      const g = new TestGroup(UnitTest);\n      g.test('zap', () => {});\n      return g;\n    })(),\n  },\n  'suite1/baz.spec.js': {\n    description: 'desc 1e',\n    g: (() => {\n      const g = new TestGroup(UnitTest);\n      g.test('zed', () => {}).params([\n        { a: 1, b: 2, _c: 0 }, //\n        { a: 1, b: 3, _c: 0 },\n      ]);\n      return g;\n    })(),\n  },\n  'suite2/foof.spec.js': {\n    description: 'desc 2b',\n    g: (() => {\n      const g = new TestGroup(UnitTest);\n      g.test('blah', t => {\n        t.debug('OK');\n      });\n      g.test('bleh', t => {\n        t.debug('OK');\n        t.debug('OK');\n      }).params([{}]);\n      g.test('bluh', t => {\n        t.fail('bye');\n      });\n      return g;\n    })(),\n  },\n};\n\nclass FakeTestFileLoader implements TestFileLoader {\n  async listing(suite: string): Promise<TestSuiteListing> {\n    return listingData[suite];\n  }\n\n  async import(path: string): Promise<TestSpecOrReadme> {\n    if (!specsData.hasOwnProperty(path)) {\n      throw new Error('[test] mock file ' + path + ' does not exist');\n    }\n    return specsData[path];\n  }\n}\n\nclass LoadingTest extends UnitTest {\n  static readonly loader: TestLoader = new TestLoader(new FakeTestFileLoader());\n\n  async load(filters: string[]): Promise<TestFilterResult[]> {\n    return Array.from(await LoadingTest.loader.loadTestsFromCmdLine(filters));\n  }\n\n  async singleGroup(query: string): Promise<RunCase[]> {\n    const [rec] = new Logger().record({ suite: '', path: '' });\n    const a = await this.load([query]);\n    if (a.length !== 1) {\n      throw new Error('more than one group');\n    }\n    const spec = a[0].spec;\n    if (!('g' in spec)) {\n      throw new Error('group undefined');\n    }\n    return Array.from(spec.g.iterate(rec));\n  }\n}\n\nexport const g = new TestGroup(LoadingTest);\n\ng.test('whole suite', async t => {\n  t.shouldReject('Error', t.load(['suite1']));\n  t.expect((await t.load(['suite1:'])).length === 5);\n});\n\ng.test('partial suite', async t => {\n  t.expect((await t.load(['suite1:f'])).length === 1);\n  t.expect((await t.load(['suite1:fo'])).length === 1);\n  t.expect((await t.load(['suite1:foo'])).length === 1);\n  t.expect((await t.load(['suite1:foof'])).length === 0);\n  t.expect((await t.load(['suite1:ba'])).length === 3);\n  t.expect((await t.load(['suite1:bar'])).length === 2);\n  t.expect((await t.load(['suite1:bar/'])).length === 2);\n  t.expect((await t.load(['suite1:bar/b'])).length === 1);\n});\n\ng.test('whole group', async t => {\n  t.shouldReject('Error', t.load(['suite1::']));\n  t.shouldReject('Error', t.load(['suite1:bar:']));\n  t.shouldReject('Error', t.load(['suite1:bar/:']));\n  t.expect((await t.singleGroup('suite1:bar/buzz:')).length === 1);\n  t.expect((await t.singleGroup('suite1:baz:')).length === 2);\n\n  {\n    const foo = (await t.load(['suite1:foo:']))[0];\n    t.expect(foo.id.suite === 'suite1');\n    t.expect(foo.id.path === 'foo');\n    if (!('g' in foo.spec)) {\n      throw new Error('foo group');\n    }\n    const [rec] = new Logger().record({ suite: '', path: '' });\n    t.expect(Array.from(foo.spec.g.iterate(rec)).length === 3);\n  }\n});\n\ng.test('partial group', async t => {\n  t.expect((await t.singleGroup('suite1:foo:h')).length === 2);\n  t.expect((await t.singleGroup('suite1:foo:he')).length === 1);\n  t.expect((await t.singleGroup('suite1:foo:hello')).length === 1);\n  t.expect((await t.singleGroup('suite1:baz:zed')).length === 2);\n});\n\ng.test('partial test/exact', async t => {\n  t.expect((await t.singleGroup('suite1:foo:hello=')).length === 1);\n  t.expect((await t.singleGroup('suite1:baz:zed=')).length === 0);\n  t.expect((await t.singleGroup('suite1:baz:zed=')).length === 0);\n  t.expect((await t.singleGroup('suite1:baz:zed={}')).length === 0);\n  t.expect((await t.singleGroup('suite1:baz:zed={\"a\":1,\"b\":2}')).length === 1);\n  t.expect((await t.singleGroup('suite1:baz:zed={\"b\":2,\"a\":1}')).length === 1);\n  t.expect((await t.singleGroup('suite1:baz:zed={\"a\":1,\"b\":2,\"_c\":0}')).length === 0);\n});\n\ng.test('partial test/makeQueryString', async t => {\n  const s = makeQueryString(\n    { suite: 'suite1', path: 'baz' },\n    { test: 'zed', params: { a: 1, b: 2 } }\n  );\n  t.expect((await t.singleGroup(s)).length === 1);\n});\n\ng.test('partial test/match', async t => {\n  t.expect((await t.singleGroup('suite1:baz:zed~')).length === 2);\n  t.expect((await t.singleGroup('suite1:baz:zed~{}')).length === 2);\n  t.expect((await t.singleGroup('suite1:baz:zed~{\"a\":1}')).length === 2);\n  t.expect((await t.singleGroup('suite1:baz:zed~{\"a\":1,\"b\":2}')).length === 1);\n  t.expect((await t.singleGroup('suite1:baz:zed~{\"b\":2,\"a\":1}')).length === 1);\n  t.expect((await t.singleGroup('suite1:baz:zed~{\"b\":2}')).length === 1);\n  t.expect((await t.singleGroup('suite1:baz:zed~{\"a\":2}')).length === 0);\n  t.expect((await t.singleGroup('suite1:baz:zed~{\"c\":0}')).length === 0);\n  t.expect((await t.singleGroup('suite1:baz:zed~{\"_c\":0}')).length === 0);\n});\n\ng.test('end2end', async t => {\n  const l = await t.load(['suite2:foof']);\n  if (l.length !== 1) {\n    throw new Error('listing length');\n  }\n\n  t.expect(l[0].id.suite === 'suite2');\n  t.expect(l[0].id.path === 'foof');\n  t.expect(l[0].spec.description === 'desc 2b');\n  if (!('g' in l[0].spec)) {\n    throw new Error();\n  }\n  t.expect(l[0].spec.g.iterate instanceof Function);\n\n  const log = new Logger();\n  const [rec, res] = log.record(l[0].id);\n  const rcs = Array.from(l[0].spec.g.iterate(rec));\n  if (rcs.length !== 3) {\n    throw new Error('iterate length');\n  }\n\n  t.expect(rcs[0].id.test === 'blah');\n  t.expect(rcs[0].id.params === null);\n\n  t.expect(rcs[1].id.test === 'bleh');\n  t.expect(paramsEquals(rcs[1].id.params, {}));\n\n  t.expect(log.results[0] === res);\n  t.expect(res.spec === 'suite2:foof:');\n  t.expect(res.cases.length === 0);\n\n  {\n    const cases = res.cases;\n    const res0 = await rcs[0].run(true);\n    if (cases.length !== 1) {\n      throw new Error('results cases length');\n    }\n    t.expect(res.cases[0] === res0);\n    t.expect(res0.test === 'blah');\n    t.expect(res0.params === null);\n    t.expect(res0.status === 'pass');\n    t.expect(res0.timems >= 0);\n    if (res0.logs === undefined) {\n      throw new Error('results case logs');\n    }\n    t.expect(objectEquals(JSON.stringify(res0.logs), '[\"OK\"]'));\n  }\n  {\n    // Store cases off to a separate variable due to a typescript bug\n    // where it can't detect that res.cases.length might change between\n    // above and here.\n    const cases = res.cases;\n    const res1 = await rcs[1].run(true);\n    if (cases.length !== 2) {\n      throw new Error('results cases length');\n    }\n    t.expect(res.cases[1] === res1);\n    t.expect(res1.test === 'bleh');\n    t.expect(paramsEquals(res1.params, {}));\n    t.expect(res1.status === 'pass');\n    t.expect(res1.timems >= 0);\n    if (res1.logs === undefined) {\n      throw new Error('results case logs');\n    }\n    t.expect(objectEquals(JSON.stringify(res1.logs), '[\"OK\",\"OK\"]'));\n  }\n  {\n    // Store cases off to a separate variable due to a typescript bug\n    // where it can't detect that res.cases.length might change between\n    // above and here.\n    const cases = res.cases;\n    const res2 = await rcs[2].run(true);\n    if (cases.length !== 3) {\n      throw new Error('results cases length');\n    }\n    t.expect(res.cases[2] === res2);\n    t.expect(res2.test === 'bluh');\n    t.expect(res2.params === null);\n    t.expect(res2.status === 'fail');\n    t.expect(res2.timems >= 0);\n    if (res2.logs === undefined) {\n      throw new Error('results case logs');\n    }\n    t.expect(res2.logs.length === 1);\n    const l = res2.logs[0].toJSON();\n    t.expect(l.startsWith('FAIL: bye\\n'));\n    t.expect(l.indexOf('loading.spec.') !== -1);\n  }\n});\n"],"file":"loading.spec.js"}